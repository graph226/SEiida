##ユースケース

**ICカードによる改札の通過**

前提条件：利用者のICカードの状態が改札内である。<br>
事後条件：ICカードの清算が完了している。切符の返金がない。利用者は改札を通過している。

 **基本系列<br>**
1. 改札機は利用者のICカードを受け付ける。 <br>
2. 利用者はICカードを改札機のICカードパネルにかざす<br>
3. 改札はICカードの乗車駅を読み取り、現在駅との距離から運賃を計算する。<br>
4. 改札はICカードの残金から運賃を差し引き、値の更新を行う。<br>
5. 改札はバーを開ける<br>
6. 利用者は改札を通過する。<br>

**例外系列<br>**
2-1.改札機はICカードを読み取れなかった場合、バーを閉じ、再度ICカードをかざすよう促す。<br>
2-2.利用者はICカードの情報に疑義がある場合、駅員にその旨を申し出る。
4.改札機はiCカードの残金が足りなかった場合、バーを閉じ、清算を促す。

--------------------
**切符による改札の通過**<br>
前提条件：利用者の切符の状態が改札内にある<br>
事後条件：切符が改札機内に格納される。利用者は改札を通過している。

**基本系列**<br>
1. 改札機は利用者の切符を受け付ける。
2. 利用者は切符を改札機の挿入口に挿入する。
3. 改札は切符の乗車駅と金額を読み取る。
4. 改札は金額が足りているかどうか判定する。
5. 金額が足りていれば、改札はバーを開ける
6. 利用者は改札を通過する。

**例外系列**<br>
2.改札機は切符以外のものが挿入された場合、排出口から挿入されたものを排出し、バーを閉じて、再挿入を促す。<br>

4.改札機は切符の値段が足りなかった場合、バーを閉じて切符を排出し、清算を促す。

--------------------
**精算機による切符の清算**<br>
前提条件：利用者は額の不足した切符を購入している<br>
事後条件：切符と引き換えに切符と同額の金額を利用者は得る

基本系列
1. 精算機は利用者からの切符の挿入を待つ。
2. 利用者は精算機に切符を挿入する。
3. 精算機は切符に記載された金額と比べ不足分を計算する。
4. 精算機は不足分を利用者に提示する。
5. 利用者は精算機にお金を投入する。
6. 精算機はお釣りと清算券を排出する

**代替系列**<br>
5:金額が足りない場合、再度お金の投入を受け付ける。

--------------------
**精算機によるICカードの清算**

前提条件：利用者は額の不足したICカード<br>
事後条件：切符と引き換えに切符と同額の金額を利用者は得る

**基本系列**

1. 精算機は利用者からのICカードの挿入を待つ。
2. 利用者は精算機にICカードを挿入する。
3. 精算機は利用者にチャージ額の選択肢を提示する
4. 利用者はチャージ額を選択する
5. 精算機は利用者にお金の投入を促す。
6. 利用者はお金を投入する。
7. 精算機はICカードのチャージ額を更新する。
8. 精算機はICカードとお釣りを排出する。

**代替系列**<br>
6:金額が足りない場合、精算機は再度利用者にお金の投入を促す。

-------------------
**駅員専用端末によるICカード情報の更新**

前提条件；利用者から駅員はICカード情報の修正を依頼される<br>
事後条件：ICカードの情報が修正される。

**基本系列**

1. 端末はICカードの認識を駅員に促す。
2. 駅員はICカードを端末のパネルにかざす。
3. 端末は駅員にICカードに記録されている金額、乗車駅を提示する。
4. 駅員は利用者から申告のあった乗車駅にICカードの情報を修正する。
5. 端末はICカードの情報を修正する。
6. 端末はもしICカードのチャージ額が不足していた場合にその旨を駅員に通知する。
6. 駅員は利用者から不足額を超えるチャージ金を受け取り、端末に挿入する。
7. 端末はICカードの情報を更新する。
8. 端末は駅員に更新終了を促す。
9. 駅員はICカードを利用者に返却する

**代替系列**

2.一定時間たっても読み取れない場合、端末は磁気切れの可能性を駅員に提示する。
